<!DOCTYPE html>
<html lang="en">
	<head>

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<!--page title-->
		<title>ConvertIt | Temperature</title>

		<!--import scripts for javascript and bootstrap-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/locale/af.js"></script>
    	
		<!--incluce stylesheet-->
		<link rel="stylesheet" href="css/convert.css">
		<link rel="stylesheet" href="css/datepicker.css">


		<!--include the header in the convert page-->
		<!--the javascript will load the header.html and assign it to the header div-->
		<script>
			$(function() {
				$("#header").load("header.html");
			});
		</script>
		<div id="header"></div>

		<!--import javascript code for conversion-->
		<script src="./js/convertTime.js" type="text/javascript"></script>

		<script>
			/*calculations*/
			var dropFrom;
			var dropTo;
			
			/*datepicker*/
			var date1;
			var date2;

			window.onload = function() {
				/*calculate on the top half of the page*/
				$("#calculate").click(convertClick);

				$("#second, #minute, #hour, #day").draggable();
				$("#dropTo").droppable({
					drop : function(event, ui) {
						$(this).addClass("ui-state-highlight").find("p").html($(ui.draggable).attr("id").toUpperCase());
						dropTo = $(ui.draggable).attr("id");
					}
				});
				$("#dropFrom").droppable({
					drop : function(event, ui) {
						$(this).addClass("ui-state-highlight").find("p").html($(ui.draggable).attr("id").toUpperCase());
						dropFrom = $(ui.draggable).attr("id");
					}
				});
			
			
				/*for the data picker on the bottom half of the page*/
				$('#datepicker').datepicker({
				    dateFormat: 'mm/dd/yy',
				    inline: true,
				    onSelect: function(dateText, inst) { 
				        date1 = $(this).datepicker('getDate');
				    }
				});
				
				$("#datepicker2").datepicker({
					dateFormat: 'mm/dd/yy',
					inline: true,
					onSelect: function(dateText, inst) {
						date2 = $(this).datepicker('getDate');
					}
				});
				$("#datepicker").on("change",function(){
			        selected = $(this).val();
    			});
    			$("#datepicker2").on("change",function(){
			        selected2 = $(this).val();
    			});
    			
    			$("#submit").click(calculate);
			};

		</script>
		
		<script>
			var calculate = function()
			{
				//you only compare days if same year and same month
				if(date1.getFullYear() == date2.getFullYear())
				{
					if(date1.getMonth() == date2.getMonth())
					{
						assignDay(dateDiff(date1, date2));
						assignHour(dateDiff(date1, date2));
					}
					else if(date1.getMonth() != date2.getMonth())
					{
						var total = multipleMonth(date1, date2);
						if(date1.getMonth() < date2.getMonth())
						{
							assignDay(total);
							assignHour(total);
						}
						else if(date1.getMonth() > date2.getMonth())
						{
							alert("else");
							//total = total * -1; //change to negative because going backwards in time
							assignDay(total);
							assignHour(total);
						}
					}
				}
				
			};
			
			var dateDiff = function(start, end)
			{
				return end.getDate() - start.getDate();
			};
			
			var assignDay = function(amt)
			{
				document.getElementById("days").innerHTML = amt + " Days";
			};
			
			var assignHour = function(amt)
			{
				document.getElementById("hours").innerHTML = (amt * 24) + " Hours";
			};

			var multipleMonth = function(start, end) 
			{
				var total = 0;
				total += dateDiff(start, new Date(start.getFullYear(), start.getMonth() + 1, 0));
				var currMonth = start.getMonth() + 1;
				while (currMonth != end.getMonth()) 
				{
					total += daysInMonth(currMonth + 1, start.getFullYear());
					curMonth++;
				}
				total += dateDiff(new Date(end.getFullYear(), end.getMonth() + 1, 1), end);
				total++;   //you lose a day when subtracting in 2 months so you add the day here
				return total;
			};

		</script>
		
		
		
	</head>

	<body>
		<div id="form-style">
			<div  class="center" id= "conversion-row">
				<input id="numFrom" type="text" >
				</input>
				<div id="dropFrom" class="droppable, ui-widget-header">
					<p>
						Drop Unit
					</p>
				</div>
				<div id="converted_value">
					<p>
						value
					</p>
				</div>
				<div id="dropTo" class="ui-widget-header">
					<p>
						Drop Unit
					</p>
				</div>
			</div>

			<!--have a separate dive to hold all choices-->
			<div class= "center">
				<button id="calculate" type="button">
					Calculate
				</button>
			</div>
			<div id="word_bank" class="center width_time">

				<div id="second" class = "unit_style">
					<p>
						SECOND
					</p>
				</div>
				<div id="minute" class = "unit_style">
					<p>
						MINUTE
					</p>
				</div>
				<div id="hour" class = "unit_style">
					<p>
						HOUR
					</p>
				</div>
				<div id="day" class = "unit_style">
					<p>
						DAY
					</p>
				</div>
			</div>

		</div>


		<div id="form-style">
			<div style="margin:5px">
				<p>Select date: </p><input type="text" id="datepicker">
				<p>Select date: </p><input type="text" id="datepicker2">
				<button id="submit" type="button">Submit</button>
				<div id="days"><p>Days</p></div>
				<div id="hours"><p>Hours</p></div>
			</div>
		</div>
		
		
		<!--include the footer in the page-->
		<!--the javascript will load the footer.html and assign it to the footer div-->
		<script>
			$(function() {
				$("#footer").load("footer.html");
			});
		</script>
		<div id="footer"></div>

	</body>

</html>
